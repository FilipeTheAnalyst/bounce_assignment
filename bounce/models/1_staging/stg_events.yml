version: 2

models:
  - name: stg_events
    description: "Staging model for events data"
    data_tests:
      - dbt_expectations.expect_table_aggregation_to_equal_other_table:
          expression: count(*)
          compare_model: ref('raw_events')
    columns:
      - name: event_id
        description: Unique identifier for the event
      - name: user_id
        description: Identifier for the user associated with the event
      - name: session_id
        description: Identifier for the session during which the event occurred
      - name: event_time
        description: Timestamp of when the event occurred
      - name: revenue
        description: Revenue generated from the event
      - name: currency
        description: Currency in which the revenue is denominated
      - name: utm_source
        description: UTM source for tracking the origin of the event